<% content_for(:title, @vtuber.name) %>

<div class="container" style="background-color: #b7ffdb;">
  <div class="row my-5">
    <div class="col-xl-6 mt-5 text-center">
      <%= image_tag @vtuber.image.url, class: "rounded-circle border border-dark", size: "300x300" %>
    </div>
    <div class="col-xl-6 d-flex justify-content-center align-items-center flex-column">
      <div class="display-4 mt-5">
        <%= @vtuber.name %>
      </div>
      <div class="d-flex mt-4">
        <% (@vtuber.places).each do |place| %>
          <%= link_to "#{place.name}", place.vtuber_places.last.url, class: "btn btn-danger" %>　
        <% end %>
        <% if @vtuber.name_x.present? %>
          <span class="pt-1">
            <%= link_to "https://twitter.com/#{@vtuber.name_x}" do %>
              <%= image_tag "logo-black.png", size: "25x25" %>
            <% end %>
          </span>
        <% end %>
      </div>
    </div>
  </div>
  
  <div class="row my-5">
    <div class="col">
      <div class="text-center my-5", id="favorite_<%= @vtuber.id %>">
        <%= render 'favorites/favorite', vtuber: @vtuber %>
      </div>
    </div>
  </div>
  
  <div class="row">
    <% if @vtuber.name_x.present? %>
      <div class="col-xl mb-5">
        <a class="twitter-timeline" data-lang="ja" data-height="700", data-width="500" href="https://twitter.com/<%= @vtuber.name_x %>?ref_src=twsrc%5Etfw">Tweets by <%= @vtuber.name_x %>></a> 
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
      </div>
    <% end %>

    
    <div class="col-xl">
      <ul class="list-unstyled">
        <div class="row justify-content-start">
          <div class="col-3 ">
            <li class="text-center">　　　性別：</li>
          </div>
          <div class="col-8"><%= @vtuber.gender %></div>
        </div>
        <div class="row pt-3 justify-content-start">
          <div class="col-3">
            <li class="text-center">デビュー日：</li>
          </div>
          <div class="col-8"><%= @vtuber.debut_date %></div>
        </div>
        <div class="row pt-3 justify-content-start">
          <div class="col-3">
            <li class="text-center">　配信内容：</li>
          </div>
          <div class="col-8">
            <% (@vtuber.contents).each_with_index do |content, index| %>
              <%= content.name %>
              <%= "、" if index < @vtuber.contents.size - 1 %>
            <% end %>
          </div>
        </div>
        <div class="row pt-3 justify-content-start">
          <div class="col-3">
            <li class="text-center">好きなこと：</li>
          </div>
          <div class="col-8"><%= @vtuber.like %></div>
        </div>
        <div class="row pt-3 justify-content-start">
          <div class="col-3 ">
            <li class="text-center">嫌いなこと：</li>
          </div>
          <div class="col-8"><%= @vtuber.unlike %></div>
        </div>
      </ul>
    </div>


  </div>
</div>

<div class="container">
  <div class="row my-5">
    <div class="col border mx-auto mb-5">
      <p class="mt-3", id="js-comment-count">コメント（<%= @vtuber.comments.count %>）</p>
      <% if logged_in? %>
        <%= form_with model: [@vtuber, @comment], url: vtuber_comment_path(@vtuber), method: :post, local: false, id: "js-comment-form" do |f| %>
          <%= render 'shared/error_message', object: f.object %>
          <div class="mb-3 mt-3">
            <%= f.text_area :body, class: "form-control", placeholder: "コメントを入力" %>
          </div>
          <div class="mb-5">
            <%= f.submit "投稿", class: "btn btn-primary" %>
          </div>
        <% end %>
      <% end %>
      <div id="comments-index">
        <%= render 'comments/comments', vtuber: @vtuber %>
      </div>
    </div>
  </div>
</div>